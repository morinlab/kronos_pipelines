__PIPELINE_INFO__:
    name: 'hg19_realignment_pipeline' 
    version: 'v1.0.0'
    author: 'ppararaj <ppararaj@sfu.ca>'
    data_type: null
    input_type: null
    output_type: null
    host_cluster: null
    date_created: '28 October 2015'
    date_last_updated: '28 October 2015'
    factory_version: '1.12.0'
__GENERAL__:
    python: '/extscratch/morinlab/software/anaconda/2.3.0/envs/pysam-0.8.3/bin/python2.7'
    samtools: '/extscratch/morinlab/software/samtools/1.2/bin/samtools'
    bamhash_checksum_bam: '/extscratch/morinlab/software/bamhash/1.0/bin/bamhash_checksum_bam'
    bwa: '/extscratch/morinlab/software/bwa/0.7.12/bwa'
    bam2fq: '/home/prasathp/repos/lab_scripts/bam2fq/adapter_bam2fq.py'
    check_read_names: '/home/prasathp/repos/lab_scripts/check_read_names/check_read_names.py'
__SHARED__:
    input_ref: '/extscratch/morinlab/shared/prasath/common/GRCh37-lite.fa'
__SAMPLES__:
    MCL-71N:
        interval_file: '/extscratch/morinlab/shared/prasath/MCL/exome/realignment/MCL-71N/interval.txt'
        input_bam: '/extscratch/morinlab/projects/nhl_meta_analysis/data/bam_originals/MCL_Morin_2015/$sample_id.bam'
        read_set: '/extscratch/morinlab/shared/prasath/MCL/exome/realignment/$sample_id/read_names.txt'
        original_checksum: '/extscratch/morinlab/shared/prasath/MCL/exome/realignment/$sample_id/checksums/$sample_id.original.md5'
        new_checksum: '/extscratch/morinlab/shared/prasath/MCL/exome/realignment/$sample_id/checksums/$sample_id.new.md5'
        outdir: '/extscratch/morinlab/shared/prasath/MCL/exome/realignment/$sample_id/'
        out_bam: '/extscratch/morinlab/shared/prasath/MCL/exome/realignment/$sample_id.sorted.merged.bam'
__BAMHASH_CHECKSUM_BAM_ORIGINAL__: 
    reserved: 
        # do not change this section.
        component_name: 'bamhash_checksum_bam'
        component_version: 'v1.0.0'
        seed_version: 'v1.0'
    run: 
        use_cluster: True
        memory: '5G'
        num_cpus: 1
        forced_dependencies: []
        add_breakpoint: False 
    component: 
        input_files: 
            in_bams: ("__SAMPLES__", "input_bam")
        output_files: 
            out_checksum: ("__SAMPLES__", "original_checksum")
__BAM2FQ__:
    reserved:
        component_name: 'bam2fq'
        component_version: 'v1.0.0'
        seed_version: 'v1.0'
    run:
        use_cluster: True
        memory: '5G'
        num_cpus: 2
        forced_dependencies: ['__BAMHASH_CHECKSUM_BAM_ORIGINAL__']
        add_breakpoint: True
    component:
        input_files:
            input_bam: ("__SAMPLES__", "input_bam")
        output_files:
            outdir: ("__SAMPLES__", "outdir")
__CHECK_BAM2FQ_FASTQ__:
    reserved:
        # do not change this section.
        component_name: 'check_read_names'
        component_version: 'v1.0.0'
        seed_version: 'v1.0'
    run:
        use_cluster: True
        memory: '24G'
        num_cpus: 1
        forced_dependencies: ['__BAM2FQ__', '__BAMHASH_CHECKSUM_BAM_ORIGINAL__']
        add_breakpoint: True
        parallel_run: False
    component:
        input_files:
            original_bam: ('__SAMPLES__', 'input_bam')
            new_fastq_filename: '*.fastq*'
        output_files:
            read_set_out: ('__SAMPLES__', 'read_set')
        parameters: 
            new_file_path: ('__SAMPLES__', 'outdir')
__BWA_MEM_PARALLELIZED__:
    reserved:
        component_name: 'bwa_mem_parallelized'
        component_version: 'v1.0.0'
        seed_version: 'v1.0'
    run:
        use_cluster: True
        memory: '6G'
        num_cpus: 1
        forced_dependencies: ['__BAMHASH_CHECKSUM_BAM_ORIGINAL__','__BAM2FQ__', '__CHECK_BAM2FQ_FASTQ__']
        add_breakpoint: False
        parallel_run: True
        interval_file: ('__SAMPLES__', 'interval_file')
    component:
        input_files:
            input_dir: ('__SAMPLES__', 'outdir')
            bwa_index_prefix: ('__SHARED__', 'input_ref')
        output_files:
            output_dir: ('__SAMPLES__', 'outdir')
__CHECK_BWA_MEM_BAMS__:
    reserved:
        # do not change this section.
        component_name: 'check_read_names'
        component_version: 'v1.0.0'
        seed_version: 'v1.0'
    run:
        use_cluster: True
        memory: '24G'
        num_cpus: 1
        forced_dependencies: ['__BAMHASH_CHECKSUM_BAM_ORIGINAL__','__BAM2FQ__', '__CHECK_BAM2FQ_FASTQ__', '__BWA_MEM_PARALLELIZED__']
        add_breakpoint: False
        parallel_run: False
    component:
        input_files:
            read_set: ('__CHECK_BAM2FQ_FASTQ__', 'read_set_out')
            new_fastq_filename: '*.unsorted.bam'
        parameters:
            new_file_path: ('__SAMPLES__', 'outdir')
            files_to_delete_path: ('__SAMPLES__', 'outdir')
            files_to_delete: '*.fastq*'
__SAMTOOLS_SORT__:
    reserved:
        component_name: 'samtools_sort_parallelized'
        component_version: 'v1.0.0'
        seed_version: 'v1.0'
    run:
        use_cluster: True
        memory: '6G'
        num_cpus: 1
        forced_dependencies: ['__BAMHASH_CHECKSUM_BAM_ORIGINAL__','__BAM2FQ__', '__CHECK_BAM2FQ_FASTQ__', '__BWA_MEM_PARALLELIZED__', '__CHECK_BWA_MEM_BAMS__']
        add_breakpoint: False
        parallel_run: True
        parallel_params: []
        interval_file: ('__SAMPLES__', 'interval_file')
    component:
        input_files:
            input_dir: ('__SAMPLES__', 'outdir')
        output_files:
            output_dir: ('__SAMPLES__', 'outdir')
__CHECK_SORTED_BAMS__:
    reserved:
        # do not change this section.
        component_name: 'check_read_names'
        component_version: 'v1.0.0'
        seed_version: 'v1.0'
    run:
        use_cluster: True
        memory: '24G'
        num_cpus: 1
        forced_dependencies: ['__BAMHASH_CHECKSUM_BAM_ORIGINAL__','__BAM2FQ__', '__CHECK_BAM2FQ_FASTQ__', '__BWA_MEM_PARALLELIZED__', '__CHECK_BWA_MEM_BAMS__', '__SAMTOOLS_SORT__']
        add_breakpoint: False
        parallel_run: False
    component:
        input_files:
            read_set: ('__CHECK_BAM2FQ_FASTQ__', 'read_set_out')
            new_fastq_filename: '*.sorted.bam'
        parameters:
            new_file_path: ('__SAMPLES__', 'outdir')
            files_to_delete_path: ('__SAMPLES__', 'outdir')
            files_to_delete: '*.unsorted.bam*'
__SAMTOOLS_MERGE__:
    reserved:
        component_name: 'samtools_merge'
        component_version: 'v1.0.0'
        seed_version: 'v1.0'
    run:
        use_cluster: True
        memory: '6G'
        num_cpus: 1
        forced_dependencies: ['__BAMHASH_CHECKSUM_BAM_ORIGINAL__','__BAM2FQ__', '__CHECK_BAM2FQ_FASTQ__', '__BWA_MEM_PARALLELIZED__', '__CHECK_BWA_MEM_BAMS__', '__SAMTOOLS_SORT__', '__CHECK_SORTED_BAMS__']
        add_breakpoint: False
    component:
        input_files:
            input_dir: ('__SAMPLES__', 'outdir')
        output_files:
            output_file: ('__SAMPLES__', 'out_bam')
__BAMHASH_CHECKSUM_BAM_REALIGNED__:
    reserved:
        # do not change this section.
        component_name: 'bamhash_checksum_bam'
        component_version: 'v1.0.0'
        seed_version: 'v1.0'
    run:
        use_cluster: True
        memory: '5G'
        num_cpus: 1
        forced_dependencies: ['__BAMHASH_CHECKSUM_BAM_ORIGINAL__','__BAM2FQ__', '__CHECK_BAM2FQ_FASTQ__', '__BWA_MEM_PARALLELIZED__', '__CHECK_BWA_MEM_BAMS__', '__SAMTOOLS_SORT__', '__CHECK_SORTED_BAMS__', '__SAMTOOLS_MERGE__']
        add_breakpoint: False
        env_vars:
        boilerplate:
    component:
        input_files:
            in_bams: ("__SAMPLES__", "out_bam")
        output_files:
            out_checksum: ("__SAMPLES__", "new_checksum")
